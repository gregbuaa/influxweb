<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!--360浏览器优先以webkit内核解析-->

		<title>Influx健康状态</title>

		<link rel="shortcut icon" href="favicon.ico" />
		<link href="/static/hplus-admin/css/bootstrap.min.css?v=3.3.7" rel="stylesheet" />
		<link href="/static/hplus-admin/css/font-awesome.css?v=4.4.0" rel="stylesheet" />

		<link href="/static/hplus-admin/css/animate.css" rel="stylesheet" />
		<link href="/static/hplus-admin/css/style.css?v=4.1.0" rel="stylesheet" />
		<!-- Morris -->
		<link href="/static/hplus-admin/css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">

		<!-- Gritter -->
		<link href="/static/hplus-admin/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">
	</head>

	<body class="gray-bg">
		<div class="wrapper wrapper-content">
			{% for item in health_state %}
			<div class="row">
				<div class="col-sm-8">
					<div class="ibox float-e-margins">
						<div class="ibox-title">
							<h5>{{ item.circle.name }}</h5>
							<div class="ibox-tools">
								<a class="collapse-link">
									<i class="fa fa-chevron-up"></i>
								</a>
								<a class="close-link">
									<i class="fa fa-times"></i>
								</a>
							</div>
						</div>
						<div class="ibox-content">
							<div class="row">
								<div class="col-sm-6">
									<div class="ibox float-e-margins">
										<div class="ibox-title">
											{% if item.circle.active %}
											<span class="label label-info pull-right">正常</span>
											{% else %}
											<span class="label label-danger pull-right">异常</span>
											{% endif %}
											<h5>当前状态</h5>
										</div>
										<div class="ibox-content">
											<h1 class="no-margins"><span class="label label-info pull-right"></span>active: {{ item.circle.active }}</span> </h1>
											<!-- <div class="stat-percent font-bold text-info">20% <i class="fa fa-level-up"></i>
											</div> -->
											<small>是否正常工作</small>
										</div>
									</div>
								</div>

								<div class="col-sm-6">
									<div class="ibox float-e-margins">
										<div class="ibox-title">
											{% if not item.circle.write_only  %}
											<span class="label label-info pull-right">正常</span>
											{% else %}
											<span class="label label-danger pull-right">异常</span>
											{% endif %}
											<h5>回写状态</h5>
										</div>
										<div class="ibox-content">
											<h1 class="no-margins">write_only: {{ item.circle.write_only }}</span> </h1>
											<!-- <div class="stat-percent font-bold text-info">20% <i class="fa fa-level-up"></i>
											</div> -->
											<small>是否正在重写缓存失败数据到相应的 influxdb 实例</small>
										</div>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-sm-12">
									<table class="table table-hover margin bottom">
										<thead>
											<tr>
												<!-- <th style="width: 1%" class="text-center">序号</th> -->
												<th>名字</th>
												<th>url</th>
												<th class="text-center">active</th>
												<th class="text-center">rewrite</th>
												<th class="text-center">backlog</th>
												<th class="text-center">healthy</th>
											</tr>
										</thead>
										<tbody>
											{% for backend in item.backends %}
											<tr>
											<td> <b>{{backend.name}}</b></td>
											<td><a href="#">{{backend.url}}</a></td>
											<td  class="text-center small">
												{% if backend.active %}
												<span class="label label-primary">{{backend.active}}</span>	
												{% else %}	
												<span class="label label-warning">{{backend.active}}</span>	
												{% endif %}		
											</td>
											<td  class="text-center small">
												{% if not backend.rewrite %}
												<span class="label label-primary">{{backend.rewrite}}</span>	
												{% else %}	
												<span class="label label-warning">{{backend.rewrite}}</span>	
												{% endif %}	
											</td>
											<td  class="text-center small">
												{% if not backend.backlog %}
												<span class="label label-primary">{{backend.backlog}}</span>	
												{% else %}	
												<span class="label label-warning">{{backend.backlog}}</span>	
												{% endif %}	
											</td>
											<td  class="text-center small">
												{% if backend.healthy %}
												<span class="label label-primary">{{backend.healthy}}</span>	
												{% else %}	
												<span class="label label-warning">{{backend.healthy}}</span>	
												{% endif %}	
											</td>
											</tr>
											{% endfor %}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>


		    <!-- 全局js -->
			<script src="/static/hplus-admin/js/jquery.min.js?v=2.1.4"></script>
			<script src="/static/hplus-admin/js/bootstrap.min.js?v=3.3.7"></script>
	</body>
</html>
